---
layout: post
title:  "mysql与答"
author: "marcelyz"
---

- 问：mysql索引相关，B+树，聚簇索引等，回表<br/>
答：索引是一种数据结构，用户帮助我们在大量数据中快速定位到目标数据。以InnoDB存储引擎为例，索引一般基于B+树实现，它是存储引擎能够快速定位记录的秘密武器。
B+树索引分为聚簇索引和非聚簇索引，聚簇索引是指按照表中主键顺序构建的一颗B+树，并在叶节点中存放表中的行记录数据。非聚簇索引是指按照表中索引列顺序构建的一颗B+树，但其叶子节点只存储用户查找对应行记录的书签(主键)。一张表一定包含一个由聚集索引构成的B+树以及若干辅助索引(非聚簇索引)构成的B+树。B+树在查找对应的记录时，并不会直接从树中找出对应的行记录，它只能获取记录所在的页，将整个页加载到内存中，再通过一些稀疏索引和属性取出对应的值。
回表：非聚簇索引的叶子节点不存储表中的数据，而是存储该列对应的主键，想要查找数据还需要根据主键再去聚簇索引中进行查找，这个过程成为回表。

- 问：最左前缀匹配原则<br>
答：在MySQL建立联合索引时会遵守最左前缀匹配原则，即最左优先，在检索数据时从联合索引的最左边开始匹配，任何连续的索引都能匹配上，且优化器会自动调整索引顺序，保证执行效率最高。不过联合索引遇到范围查询时会停止匹配，从索引中的第一个数据一个个的查找到最后一个索引数据，只到找到为止。
* 优点：减少开销，覆盖索引，效率高。建立一个联合索引，相当于建了多个索引，减少了写开销。直接读取覆盖联合索引列中的数据，不需要回表，性能提升特别大。